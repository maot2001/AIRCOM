@*CAMBIAR AEROPUERTO>USUARIO*@
@*ADAPTAR LOS NUEVOS FORMULARIOS*@

@{
    string[] open = new string[6];
    @if (ViewBag.lugar_del_error >= 4 && ViewBag.lugar_del_error <= 9)
    {
        open[ViewBag.lugar_del_error - 4] = "open";
    }
}

<header>
    AIRCOM
</header>

<nav>
    <h4>AEROPUERTO > USUARIO</h4>
        <form asp-controller="Security" asp-action="Index">
        <div>
            <div><button class="no" type="submit" name="page" value="1">üïë</button></div>
            <div><button class="no" type="submit" name="page" value="2">‚úàÔ∏è</button></div>
            <div><button class="no" type="submit" name="page" value="3">üë®‚Äçüíº</button></div>
            <div><button class="yes" type="submit" name="page" value="4">‚ûï</button></div>
        </div>
    </form>
</nav>

@if (ViewBag.sucess != "")
{
    <div class="alert-success">@ViewBag.sucess</div>
}

<section>
    @*Agregar usuario*@
    <details @open[0]>
        <summary>A√±adir Cliente</summary>
        <center>
            <form asp-controller="Client" asp-action="Create" class="formulario">
                <table>
                    <tr>
                        <td>nombre: </td>
                        <td><input type="text" name='name' placeholder="introduzca nombre" required></td>
                    </tr>
                    <tr>
                        <td>Direcci√≥n de correo: </td>
                        <td><input type="email" name="email" placeholder="correo electr√≥nico" required></td>
                    </tr>
                    <tr>
                        <td>Carnet de identidad: </td>
                        <td><input type="text" name='ci' pattern="[0-9]{1,}" title="Debe ser numero" placeholder="introduzca ID" required></td>
                    </tr>
                    <tr>
                        <td>Nacionalidad: </td>
                        <td><input type="text" name='nationality' placeholder="introduzca el pa√≠s" required></td>
                    </tr>
                    <td>Tipo de cliente: </td>
                    <td>
                        <select name='type'>
                            <option value="VIP">VIP</option>
                            <option value="Due√±o de naves">Due√±o de naves</option>
                            <option value="Patrocinador">Patrocinador</option>
                            <option value="Empresa de viajes">Empresa de viajes</option>
                        </select>
                    </td>
                    <tr>
                        <td>Contrase√±a: </td>
                        <td><input type="password" name='pwd' placeholder="introduzca contrase√±a" required></td>
                    </tr>
                    <tr>
                        <td>Comprobar contrase√±a: </td>
                        <td><input type="password" name='pwd2' placeholder="repita contrase√±a" required></td>
                    </tr>
                </table>
                @if (ViewBag.lugar_del_error == 4)
                {
                    <aside class="error">
                        @ViewBag.error
                    </aside>
                }
                <button class="boton">Enviar</button>
            </form>
        </center>
    </details>

    @*Agregar trabajador*@
    <details @open[1]>
        <summary>A√±adir Trabajador</summary>
        <center>
            <form class="formulario" asp-controller="Client" asp-action="Create">
                <table>
                    <tr>
                        <td>nombre: </td>
                        <td><input type="text" name='name' placeholder="introduzca nombre" required></td>
                    </tr>
                    <tr>
                        <td>Direcci√≥n de correo: </td>
                        <td><input type="email" name="email" placeholder="correo electr√≥nico" required></td>
                    </tr>
                    <tr>
                        <td>Carnet de identidad: </td>
                        <td><input type="text" name='ci' pattern="[0-9]{1,}" title="Debe ser numero" placeholder="introduzca ID" required></td>
                    </tr>
                    <tr>
                        <td><input type="text" name='nationality' value='Cuba' hidden></td>
                    </tr>
                    <tr>
                        <td>Puesto: </td>
                        <td>
                            <select name='type'>
                                <option>Seguridad</option>
                                <option>Direcci√≥n</option>
                                <option>Mec√°nico</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Contrase√±a: </td>
                        <td><input type="password" name='pwd' placeholder="introduzca contrase√±a" required></td>
                    </tr>
                    <tr>
                        <td>Comprobar contrase√±a: </td>
                        <td><input type="password" name='pwd2' placeholder="repita contrase√±a" required></td>
                    </tr>
                </table>
                @if (ViewBag.lugar_del_error == 5)
                {
                    <aside class="error">
                        @ViewBag.error
                    </aside>
                }
                <button class="boton">Enviar</button>
            </form>
        </center>
    </details>
    
    @*Agregar Nave*@
    <details @open[2]>
        <summary>A√±adir Nave</summary>
        <center>
            <form asp-controller="Ships" asp-action="Create" class="formulario">
                <table>
                    <tr>
                        <td><input type="text" name="state" value="√ìptimo" hidden></td>
                    </tr>
                    <tr>
                        <td>Matricula: </td>
                        <td><input type="text" name="plate" placeholder="Introduzca Matr√≠cula" required></td>
                    </tr>
                    <tr>
                        <td>ID Due√±o(opcional): </td>
                        <td><input type="text" name="clientid" pattern="[0-9]{1,}" placeholder="introduzca ID"></td>
                    </tr>
                    <tr>
                        <td>Modelo: </td>
                        <td><input type="text" name="model" placeholder="Introduzca Modelo" required></td>
                    </tr>
                    <tr>
                        <td>Capacidad de carga (en toneladas): </td>
                        <td><input type="number" name="crew" min="0" placeholder="Introduzca Capacidad" required></td>
                    </tr>
                    <tr>
                        <td>Cantidad de tripulacion: </td>
                        <td><input type="number" name="capacity" placeholder="Introduzca Tripulacion" min="0" required></td>
                    </tr>
                    <tr>
                        <td>Cantidad de pasajeros: </td>
                        <td><input type="number" name="pass" min="0" placeholder="Introduzca cantidad" required></td>
                    </tr>
                </table>
                @if (ViewBag.lugar_del_error == 6)
                {
                    <aside class="error">
                        @ViewBag.error
                    </aside>
                }
                <button class="boton">Enviar</button>
            </form>
        </center>
    </details>
    
    @*Solicitar reparacion*@
    <details @open[3]>
        <summary>Solicitar Reparaci√≥n</summary>
        <center>
            <form asp-controller="RepairShip" asp-action="RequestRepair" class="formulario">
                <table>
                    <tr>
                        <td>Matricula: </td>
                        <td><input type="text" name="plate" placeholder="Introduzca Matr√≠cula" required></td>
                    </tr>
                    <tr>
                        <td>Instalaci√≥n de la reparaci√≥n </td>
                        <td>
                            <select name="InstallationID" asp-items="ViewBag.installations"></select>
                        </td>
                    </tr>
                    <tr>
                        <td>Tipo de reparaci√≥n: </td>
                        <td>
                            <select name="RepairID" asp-items="ViewBag.repairs"></select>
                        </td>
                    </tr>
                </table>
                @if (ViewBag.lugar_del_error == 7)
                {
                    <aside class="error">
                        @ViewBag.error
                    </aside>
                }
                <button class="boton">Enviar</button>
            </form>
        </center>
    </details>
    
    @*Registrar Arribo*@
    <details @open[4]>
        <summary>Registrar Arribo</summary>
        <center>
            <form asp-controller="History" asp-action="Create" class="formulario">
                <table>
                    <tr>
                        <td>Matricula: </td>
                        <td><input type="text" name="plate" placeholder="Introduzca Matr√≠cula" required></td>
                    </tr>
                    <tr>
                        <td>Rol del due√±o:</td>
                        <td>
                            <select name="ownerRole">
                                <option>Ninguno</option>
                                <option>Capitan</option>
                                <option>Pasajero</option>
                                <option>Copiloto</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Estado de la nave: </td>
                        <td>
                            <select name="state">
                                <option>√ìptimo</option>
                                <option>Bien</option>
                                <option>Regular</option>
                                <option>Mal</option>
                                <option>P√©simo</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Proximo vuelo: </td>
                        <td><input type="date" name="exitDate" required
                                       min="@DateTime.Now.Date.ToString().Split().First()"></td>
                    </tr>
                </table>
                @if (ViewBag.lugar_del_error == 8)
                {
                    <aside class="error">
                        @ViewBag.error
                    </aside>
                }
                <button class="boton">Enviar</button>
            </form>
        </center>
    </details>
    
    <center><h1>Zona Peligrosa</h1></center>
    
    @*Cambiar nombre al aeropuerto*@
        <details class="dangerousZone">
            <summary>Cambiar nombre al aeropuerto</summary>
            <form class="formulario" method="post" name="NombreAeropuerto">
                <center>
                    <input type="text" name="nombre" placeholder="introduzca nuevo nombre" required>
                    <button class="goodboton" type="submit">Cambiar Nombre</button>
                </center>
            </form>
        </details>

    @*Editar informacion de usuario*@
    <details class="dangerousZone" @open[5]>
        <summary>Editar informaci√≥n de cliente o trabajador</summary>
        <center>
            <form method="post" class="formulario">
                <table>
                    <tr>
                        <td>Correo: </td>
                        <td><input name="email"></td>
                    </tr>
                    <tr>
                            <td>Cambiar tipo: </td>
                            <td>
                                <select name="type">
                                    <option>VIP</option>
                                    <option>Due√±o de naves</option>
                                    <option>Patrocinador</option>
                                    <option>Empresa de viajes</option>
                                    <option>Seguridad</option>
                                    <option>Direccion</option>
                                    <option>Mecanico</option>
                                </select>
                            </td>
                        </tr>
                    <tr>
                        <td>Cambiar Contrase√±a: </td>
                        <td><input type="password" name="pwd"></td>
                    </tr>
                    <tr>
                        <td>Comprobar contrase√±a: </td>
                        <td><input type="password" name="pwd2"></td>
                    </tr>
                </table>
                @if (ViewBag.lugar_del_error == 9)
                {
                    <aside class="error">
                        @ViewBag.error
                    </aside>
                }
                <input asp-controller="Client" class="boton" asp-action="Edit" type="submit" value="Cambiar Contrase√±a">

                <input asp-controller="Client" class="badboton" asp-action="Delete" type="submit" value="Eliminar usuario">
            </form>
        </center>
    </details>

    @*Editar nave*@
        <details class="dangerousZone">
            <summary>Editar informaci√≥n de una nave</summary>
            <form class="formulario" method="post">
                <center>
                    <table>
                        <tr>
                            <td>Matricula: </td>
                            <td><input type="text" name="plate" placeholder="Introduzca Matr√≠cula" required></td>
                        </tr>
                        <tr>
                            <td>Cambiar due√±o: </td>
                            <td><input type="text" pattern="[0-9]{1,}" name="clientid" placeholder="ID del nuevo due√±o"></td>
                        </tr>
                    </table>
                    @if (ViewBag.lugar_del_error == 7)
                    {
                        <aside class="error">
                            @ViewBag.error
                        </aside>
                    }
                    <center class="error">Si se cambia de due√±o y no se asume ID entonces la nave dejar√° de tener due√±o</center>
                    <button class="goodboton" type="submit" asp-controller="Ships" asp-action="Edit">Cambiar due√±o</button>
                    <button class="badboton" type="submit" asp-controller="Ships" asp-action="Delete">Eliminar nave</button>
                </center>
            </form>
        </details>
</section>
